{"ast":null,"code":"import _regeneratorRuntime from \"/home/lukatoni/Repositories/NextProjects/invoice-creator/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/lukatoni/Repositories/NextProjects/invoice-creator/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport create from 'zustand';\nimport { supabase } from './supabaseClient';\nimport createContext from 'zustand/context';\n\nvar _createContext = createContext(),\n    Provider = _createContext.Provider,\n    useStore = _createContext.useStore;\n\nexport { Provider, useStore };\nexport var createStore = function createStore() {\n  return create(function (set, get) {\n    return {\n      authView: 'sign_in',\n      error: '',\n      email: '',\n      password: '',\n      message: '',\n      loading: false,\n      setAuthView: function setAuthView(to) {\n        return set(function (state) {\n          return {\n            authView: to\n          };\n        });\n      },\n      // setError: (to) => set(state => ({ error: to })),\n      setEmail: function setEmail(to) {\n        return set(function (state) {\n          return {\n            email: to.trim()\n          };\n        });\n      },\n      setPassword: function setPassword(to) {\n        return set(function (state) {\n          return {\n            password: to.trim()\n          };\n        });\n      },\n      handleSignIn: function () {\n        var _handleSignIn = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n          var email, password, _yield$supabase$auth$, signInError;\n\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  event.preventDefault();\n                  set({\n                    error: ''\n                  });\n                  set({\n                    loading: true\n                  });\n                  email = get().email;\n                  password = get().password;\n                  _context.next = 7;\n                  return supabase.auth.signIn({\n                    email: email,\n                    password: password\n                  }, {\n                    redirectTo: 'http://localhost:3000/Dashboard'\n                  });\n\n                case 7:\n                  _yield$supabase$auth$ = _context.sent;\n                  signInError = _yield$supabase$auth$.error;\n                  if (signInError) set({\n                    error: signInError.message\n                  });\n                  set({\n                    loading: false\n                  });\n\n                case 11:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        function handleSignIn(_x) {\n          return _handleSignIn.apply(this, arguments);\n        }\n\n        return handleSignIn;\n      }(),\n      handleSignUp: function () {\n        var _handleSignUp = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event) {\n          var email, password, _yield$supabase$auth$2, signUpError;\n\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  event.preventDefault();\n                  set({\n                    error: ''\n                  });\n                  set({\n                    loading: true\n                  });\n                  email = get().email;\n                  password = get().password;\n                  _context2.next = 7;\n                  return supabase.auth.signUp({\n                    email: email,\n                    password: password\n                  });\n\n                case 7:\n                  _yield$supabase$auth$2 = _context2.sent;\n                  signUpError = _yield$supabase$auth$2.error;\n                  if (signUpError) set({\n                    error: signUpError.message\n                  });\n                  set({\n                    loading: false\n                  });\n\n                case 11:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        function handleSignUp(_x2) {\n          return _handleSignUp.apply(this, arguments);\n        }\n\n        return handleSignUp;\n      }(),\n      handlePasswordReset: function () {\n        var _handlePasswordReset = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event) {\n          var email, _yield$supabase$auth$3, error;\n\n          return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  event.preventDefault();\n                  set({\n                    error: ''\n                  });\n                  set({\n                    loading: true\n                  });\n                  email = get().email;\n                  _context3.next = 6;\n                  return supabase.auth.api.resetPasswordForEmail(email);\n\n                case 6:\n                  _yield$supabase$auth$3 = _context3.sent;\n                  error = _yield$supabase$auth$3.error;\n                  if (error) set({\n                    error: error.message\n                  });else set({\n                    message: 'Check your email for the password reset link'\n                  });\n                  set({\n                    loading: false\n                  });\n\n                case 10:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3);\n        }));\n\n        function handlePasswordReset(_x3) {\n          return _handlePasswordReset.apply(this, arguments);\n        }\n\n        return handlePasswordReset;\n      }()\n    };\n  });\n};","map":{"version":3,"sources":["/home/lukatoni/Repositories/NextProjects/invoice-creator/lib/store.ts"],"names":["create","supabase","createContext","Provider","useStore","createStore","set","get","authView","error","email","password","message","loading","setAuthView","to","state","setEmail","trim","setPassword","handleSignIn","event","preventDefault","auth","signIn","redirectTo","signInError","handleSignUp","signUp","signUpError","handlePasswordReset","api","resetPasswordForEmail"],"mappings":"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","sourcesContent":["import { FormEvent } from 'react'\nimport create from 'zustand'\nimport { supabase } from './supabaseClient';\nimport createContext from 'zustand/context'\n\nexport const { Provider, useStore } = createContext<authContextState>();\n export interface authContextState {\n    authView: string,\n    setAuthView: (to: string) => void\n    email: string  \n    password: string\n    error: string\n    loading: boolean\n    message: string\n\n    setEmail: (to: string) => void\n    setPassword: (to: string) => void\n   // setError: (to: string) => void\n    handleSignIn: (event: FormEvent) => void\n    handleSignUp: (event: FormEvent) => void\n    handlePasswordReset: (event:FormEvent) => void\n}\n\n\n\nexport const createStore = () => create<authContextState>((set,get) => ({\n    authView: 'sign_in',\n    error: '',\n    email: '',\n    password: '',\n    message: '',\n    loading: false,\n    setAuthView: (to) => set(state => ({ authView: to })),\n   // setError: (to) => set(state => ({ error: to })),\n    setEmail: (to) => set(state => ({ email: to.trim() })),\n    setPassword: (to) => set(state => ({ password: to.trim() })),\n    handleSignIn: async (event) => {\n        event.preventDefault()\n        set({ error: '' })\n        set({ loading: true })\n        const email = get().email\n        const password = get().password\n        const { error: signInError } = await supabase.auth.signIn({ email, password }, {redirectTo: 'http://localhost:3000/Dashboard'})\n        if (signInError) set({ error: signInError.message })\n        set({loading: false})\n    },\n    handleSignUp: async (event) => {\n        event.preventDefault()\n        set({ error: '' })\n        set({ loading: true })\n        const email = get().email\n        const password  = get().password\n        const { error: signUpError } = await supabase.auth.signUp({ email, password })\n        if (signUpError) set({ error: signUpError.message })\n        set({loading: false})\n    },\n    handlePasswordReset: async (event) => {\n        event.preventDefault()\n        set({ error: '' })\n        set({ loading: true })\n        const email = get().email\n        const { error } = await supabase.auth.api.resetPasswordForEmail(email)\n        if (error) set({ error: error.message })\n        else set({ message: 'Check your email for the password reset link' })\n        set({loading : false})\n    }\n}))"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/lukatoni/Repositories/NextProjects/invoice-creator/components/Avatar.tsx\";\nimport { useEffect, useState } from 'react';\nimport { supabase } from '../lib/supabaseClient';\nimport { DEFAULT_AVATARS_BUCKET } from '../lib/constants';\nexport default function Avatar({\n  url,\n  size\n}) {\n  const {\n    0: avatarUrl,\n    1: setAvatarUrl\n  } = useState(null);\n  useEffect(() => {\n    if (url) downloadImage(url);\n  }, [url]);\n\n  async function downloadImage(path) {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.storage.from(DEFAULT_AVATARS_BUCKET).download(path);\n\n      if (error) {\n        throw error;\n      }\n\n      const url = URL.createObjectURL(data);\n      setAvatarUrl(url);\n    } catch (error) {\n      console.log('Error downloading image: ', error.message);\n    }\n  }\n\n  return avatarUrl ? /*#__PURE__*/_jsxDEV(\"img\", {\n    src: avatarUrl,\n    className: \"avatar image\",\n    style: {\n      height: size,\n      width: size\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"avatar no-image\",\n    style: {\n      height: size,\n      width: size\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["/home/lukatoni/Repositories/NextProjects/invoice-creator/components/Avatar.tsx"],"names":["useEffect","useState","supabase","DEFAULT_AVATARS_BUCKET","Avatar","url","size","avatarUrl","setAvatarUrl","downloadImage","path","data","error","storage","from","download","URL","createObjectURL","console","log","message","height","width"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,QAAT,QAAyB,uBAAzB;AACA,SAASC,sBAAT,QAAuC,kBAAvC;AAEA,eAAe,SAASC,MAAT,CAAgB;AAAEC,EAAAA,GAAF;AAAOC,EAAAA;AAAP,CAAhB,EAAqE;AAClF,QAAM;AAAA,OAACC,SAAD;AAAA,OAAYC;AAAZ,MAA4BP,QAAQ,CAAgB,IAAhB,CAA1C;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIK,GAAJ,EAASI,aAAa,CAACJ,GAAD,CAAb;AACV,GAFQ,EAEN,CAACA,GAAD,CAFM,CAAT;;AAIA,iBAAeI,aAAf,CAA6BC,IAA7B,EAA2C;AACzC,QAAI;AACF,YAAM;AAAEC,QAAAA,IAAF;AAAQC,QAAAA;AAAR,UAAkB,MAAMV,QAAQ,CAACW,OAAT,CAAiBC,IAAjB,CAAsBX,sBAAtB,EAA8CY,QAA9C,CAAuDL,IAAvD,CAA9B;;AACA,UAAIE,KAAJ,EAAW;AACT,cAAMA,KAAN;AACD;;AACD,YAAMP,GAAG,GAAGW,GAAG,CAACC,eAAJ,CAAoBN,IAApB,CAAZ;AACAH,MAAAA,YAAY,CAACH,GAAD,CAAZ;AACD,KAPD,CAOE,OAAOO,KAAP,EAAc;AACdM,MAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCP,KAAK,CAACQ,OAA/C;AACD;AACF;;AAED,SAAOb,SAAS,gBACd;AAAK,IAAA,GAAG,EAAEA,SAAV;AAAqB,IAAA,SAAS,EAAC,cAA/B;AAA8C,IAAA,KAAK,EAAE;AAAEc,MAAAA,MAAM,EAAEf,IAAV;AAAgBgB,MAAAA,KAAK,EAAEhB;AAAvB;AAArD;AAAA;AAAA;AAAA;AAAA,UADc,gBAGd;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAiC,IAAA,KAAK,EAAE;AAAEe,MAAAA,MAAM,EAAEf,IAAV;AAAgBgB,MAAAA,KAAK,EAAEhB;AAAvB;AAAxC;AAAA;AAAA;AAAA;AAAA,UAHF;AAKD","sourcesContent":["import { useEffect, useState } from 'react'\nimport { supabase } from '../lib/supabaseClient'\nimport { DEFAULT_AVATARS_BUCKET } from '../lib/constants'\n\nexport default function Avatar({ url, size }: { url: string | null; size: number }) {\n  const [avatarUrl, setAvatarUrl] = useState<string | null>(null)\n\n  useEffect(() => {\n    if (url) downloadImage(url)\n  }, [url])\n\n  async function downloadImage(path: string) {\n    try {\n      const { data, error } = await supabase.storage.from(DEFAULT_AVATARS_BUCKET).download(path)\n      if (error) {\n        throw error\n      }\n      const url = URL.createObjectURL(data)\n      setAvatarUrl(url)\n    } catch (error) {\n      console.log('Error downloading image: ', error.message)\n    }\n  }\n\n  return avatarUrl ? (\n    <img src={avatarUrl} className=\"avatar image\" style={{ height: size, width: size }} />\n  ) : (\n    <div className=\"avatar no-image\" style={{ height: size, width: size }} />\n  )\n}\n"]},"metadata":{},"sourceType":"module"}
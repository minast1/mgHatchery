{"ast":null,"code":"import create from 'zustand';\nimport { supabase } from './supabaseClient';\nimport createContext from 'zustand/context';\nexport const {\n  Provider,\n  useStore\n} = createContext();\nexport const createStore = () => create((set, get) => ({\n  authView: 'sign_in',\n  error: '',\n  email: '',\n  password: '',\n  session: null,\n  setSession: user => set(state => ({\n    session: user\n  })),\n  message: '',\n  loading: false,\n  setAuthView: to => set(state => ({\n    authView: to\n  })),\n  // setError: (to) => set(state => ({ error: to })),\n  setEmail: to => set(state => ({\n    email: to.trim()\n  })),\n  setPassword: to => set(state => ({\n    password: to.trim()\n  })),\n  handleSignIn: async event => {\n    event.preventDefault();\n    set({\n      error: ''\n    });\n    set({\n      loading: true\n    });\n    const email = get().email;\n    const password = get().password;\n    const {\n      session: AuthSession,\n      error: signInError\n    } = await supabase.auth.signIn({\n      email,\n      password\n    });\n    if (signInError) set({\n      error: signInError.message\n    });\n    set({\n      loading: false\n    });\n\n    if (AuthSession) {\n      set({\n        session: AuthSession\n      });\n      window.location.replace(\"http://localhost:3000/Dashboard\");\n    }\n  },\n  handleSignUp: async event => {\n    event.preventDefault();\n    set({\n      error: ''\n    });\n    set({\n      loading: true\n    });\n    const email = get().email;\n    const password = get().password;\n    const {\n      session: AuthSession,\n      error: signUpError\n    } = await supabase.auth.signUp({\n      email,\n      password\n    });\n    if (signUpError) set({\n      error: signUpError.message\n    });\n    set({\n      loading: false\n    });\n\n    if (AuthSession) {\n      set({\n        session: AuthSession\n      });\n    }\n  },\n  handlePasswordReset: async event => {\n    event.preventDefault();\n    set({\n      error: ''\n    });\n    set({\n      loading: true\n    });\n    const email = get().email;\n    const {\n      error\n    } = await supabase.auth.api.resetPasswordForEmail(email);\n    if (error) set({\n      error: error.message\n    });else set({\n      message: 'Check your email for the password reset link'\n    });\n    set({\n      loading: false\n    });\n  }\n}));","map":{"version":3,"sources":["/home/lukatoni/Repositories/NextProjects/invoice-creator/lib/store.ts"],"names":["create","supabase","createContext","Provider","useStore","createStore","set","get","authView","error","email","password","session","setSession","user","state","message","loading","setAuthView","to","setEmail","trim","setPassword","handleSignIn","event","preventDefault","AuthSession","signInError","auth","signIn","window","location","replace","handleSignUp","signUpError","signUp","handlePasswordReset","api","resetPasswordForEmail"],"mappings":"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","sourcesContent":["import { FormEvent } from 'react'\nimport create from 'zustand'\nimport { supabase } from './supabaseClient';\nimport createContext from 'zustand/context'\nimport { AuthSession } from '@supabase/supabase-js'\n\n\n\n\nexport const { Provider, useStore } = createContext<authContextState>();\n\n\nexport interface authContextState {\n     session: AuthSession | null\n    authView: string\n    setAuthView: (to: string) => void\n    email: string  \n    password: string\n    error: string\n    loading: boolean\n    message: string\n    setSession: (user:AuthSession)=> void\n    setEmail: (to: string) => void\n    setPassword: (to: string) => void\n   // setError: (to: string) => void\n    handleSignIn: (event: FormEvent) => void\n    handleSignUp: (event: FormEvent) => void\n    handlePasswordReset: (event:FormEvent) => void\n}\n\n\n\nexport const createStore = () => create<authContextState>((set,get) => ({\n    authView: 'sign_in',\n    error: '',\n    email: '',\n    password: '',\n    session: null,\n    setSession: (user) => set(state => ({session: user})),\n    message: '',\n    loading: false,\n    setAuthView: (to) => set(state => ({ authView: to })),\n   // setError: (to) => set(state => ({ error: to })),\n    setEmail: (to) => set(state => ({ email: to.trim() })),\n    setPassword: (to) => set(state => ({ password: to.trim() })),\n    handleSignIn: async (event) => {\n        event.preventDefault()\n        set({ error: '' })\n        set({ loading: true })\n        const email = get().email\n        const password = get().password\n        const {  session:AuthSession, error: signInError } = await supabase.auth.signIn({ email, password })\n        if (signInError) set({ error: signInError.message })\n\n        set({ loading: false })\n        if (AuthSession) {\n             set({session: AuthSession})\n            window.location.replace(\"http://localhost:3000/Dashboard\")\n        }\n    },\n    handleSignUp: async (event) => {\n        event.preventDefault()\n        set({ error: '' })\n        set({ loading: true })\n        const email = get().email\n        const password  = get().password\n        const { session:AuthSession, error: signUpError } = await supabase.auth.signUp({ email, password })\n        if (signUpError) set({ error: signUpError.message })\n        set({ loading: false })\n        if (AuthSession) {\n            set({session : AuthSession})\n        }\n    },\n    handlePasswordReset: async (event) => {\n        event.preventDefault()\n        set({ error: '' })\n        set({ loading: true })\n        const email = get().email\n        const { error } = await supabase.auth.api.resetPasswordForEmail(email)\n        if (error) set({ error: error.message })\n        else set({ message: 'Check your email for the password reset link' })\n        set({loading : false})\n    }\n}))"]},"metadata":{},"sourceType":"module"}
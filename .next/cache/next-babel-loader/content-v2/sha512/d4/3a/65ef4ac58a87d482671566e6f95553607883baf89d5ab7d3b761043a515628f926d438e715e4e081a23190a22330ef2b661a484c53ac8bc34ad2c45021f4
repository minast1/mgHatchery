{"ast":null,"code":"import create from 'zustand';\nimport { supabase } from './supabaseClient';\nimport createContext from 'zustand/context';\nexport const {\n  Provider,\n  useStore\n} = createContext();\nexport const createStore = () => create((set, get) => ({\n  authView: 'sign_in',\n  error: '',\n  email: '',\n  password: '',\n  session: null,\n  message: '',\n  loading: false,\n  setAuthView: to => set(state => ({\n    authView: to\n  })),\n  // setError: (to) => set(state => ({ error: to })),\n  setEmail: to => set(state => ({\n    email: to.trim()\n  })),\n  setPassword: to => set(state => ({\n    password: to.trim()\n  })),\n  handleSignIn: async event => {\n    event.preventDefault();\n    set({\n      error: ''\n    });\n    set({\n      loading: true\n    });\n    const email = get().email;\n    const password = get().password;\n    const {\n      error: signInError\n    } = await supabase.auth.signIn({\n      email,\n      password\n    });\n    if (signInError) set({\n      error: signInError.message\n    });\n    set({\n      loading: false\n    });\n  },\n  handleSignUp: async event => {\n    event.preventDefault();\n    set({\n      error: ''\n    });\n    set({\n      loading: true\n    });\n    const email = get().email;\n    const password = get().password;\n    const {\n      error: signUpError\n    } = await supabase.auth.signUp({\n      email,\n      password\n    });\n    if (signUpError) set({\n      error: signUpError.message\n    });\n    set({\n      loading: false\n    });\n  },\n  handlePasswordReset: async event => {\n    event.preventDefault();\n    set({\n      error: ''\n    });\n    set({\n      loading: true\n    });\n    const email = get().email;\n    const {\n      error\n    } = await supabase.auth.api.resetPasswordForEmail(email);\n    if (error) set({\n      error: error.message\n    });else set({\n      message: 'Check your email for the password reset link'\n    });\n    set({\n      loading: false\n    });\n  }\n}));","map":{"version":3,"sources":["/home/lukatoni/Repositories/NextProjects/invoice-creator/lib/store.ts"],"names":["create","supabase","createContext","Provider","useStore","createStore","set","get","authView","error","email","password","session","message","loading","setAuthView","to","state","setEmail","trim","setPassword","handleSignIn","event","preventDefault","signInError","auth","signIn","handleSignUp","signUpError","signUp","handlePasswordReset","api","resetPasswordForEmail"],"mappings":"AACA,OAAOA,MAAP,MAAmB,SAAnB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AAMA,OAAO,MAAM;AAAEC,EAAAA,QAAF;AAAYC,EAAAA;AAAZ,IAAyBF,aAAa,EAA5C;AAsBP,OAAO,MAAMG,WAAW,GAAG,MAAML,MAAM,CAAmB,CAACM,GAAD,EAAKC,GAAL,MAAc;AACpEC,EAAAA,QAAQ,EAAE,SAD0D;AAEpEC,EAAAA,KAAK,EAAE,EAF6D;AAGpEC,EAAAA,KAAK,EAAE,EAH6D;AAIpEC,EAAAA,QAAQ,EAAE,EAJ0D;AAKpEC,EAAAA,OAAO,EAAE,IAL2D;AAMpEC,EAAAA,OAAO,EAAE,EAN2D;AAOpEC,EAAAA,OAAO,EAAE,KAP2D;AAQpEC,EAAAA,WAAW,EAAGC,EAAD,IAAQV,GAAG,CAACW,KAAK,KAAK;AAAET,IAAAA,QAAQ,EAAEQ;AAAZ,GAAL,CAAN,CAR4C;AASrE;AACCE,EAAAA,QAAQ,EAAGF,EAAD,IAAQV,GAAG,CAACW,KAAK,KAAK;AAAEP,IAAAA,KAAK,EAAEM,EAAE,CAACG,IAAH;AAAT,GAAL,CAAN,CAV+C;AAWpEC,EAAAA,WAAW,EAAGJ,EAAD,IAAQV,GAAG,CAACW,KAAK,KAAK;AAAEN,IAAAA,QAAQ,EAAEK,EAAE,CAACG,IAAH;AAAZ,GAAL,CAAN,CAX4C;AAYpEE,EAAAA,YAAY,EAAE,MAAOC,KAAP,IAAiB;AAC3BA,IAAAA,KAAK,CAACC,cAAN;AACAjB,IAAAA,GAAG,CAAC;AAAEG,MAAAA,KAAK,EAAE;AAAT,KAAD,CAAH;AACAH,IAAAA,GAAG,CAAC;AAAEQ,MAAAA,OAAO,EAAE;AAAX,KAAD,CAAH;AACA,UAAMJ,KAAK,GAAGH,GAAG,GAAGG,KAApB;AACA,UAAMC,QAAQ,GAAGJ,GAAG,GAAGI,QAAvB;AACA,UAAM;AAAGF,MAAAA,KAAK,EAAEe;AAAV,QAA0B,MAAMvB,QAAQ,CAACwB,IAAT,CAAcC,MAAd,CAAqB;AAAEhB,MAAAA,KAAF;AAASC,MAAAA;AAAT,KAArB,CAAtC;AACA,QAAIa,WAAJ,EAAiBlB,GAAG,CAAC;AAAEG,MAAAA,KAAK,EAAEe,WAAW,CAACX;AAArB,KAAD,CAAH;AACjBP,IAAAA,GAAG,CAAC;AAAEQ,MAAAA,OAAO,EAAE;AAAX,KAAD,CAAH;AAEH,GAtBmE;AAuBpEa,EAAAA,YAAY,EAAE,MAAOL,KAAP,IAAiB;AAC3BA,IAAAA,KAAK,CAACC,cAAN;AACAjB,IAAAA,GAAG,CAAC;AAAEG,MAAAA,KAAK,EAAE;AAAT,KAAD,CAAH;AACAH,IAAAA,GAAG,CAAC;AAAEQ,MAAAA,OAAO,EAAE;AAAX,KAAD,CAAH;AACA,UAAMJ,KAAK,GAAGH,GAAG,GAAGG,KAApB;AACA,UAAMC,QAAQ,GAAIJ,GAAG,GAAGI,QAAxB;AACA,UAAM;AAAEF,MAAAA,KAAK,EAAEmB;AAAT,QAAyB,MAAM3B,QAAQ,CAACwB,IAAT,CAAcI,MAAd,CAAqB;AAAEnB,MAAAA,KAAF;AAASC,MAAAA;AAAT,KAArB,CAArC;AACA,QAAIiB,WAAJ,EAAiBtB,GAAG,CAAC;AAAEG,MAAAA,KAAK,EAAEmB,WAAW,CAACf;AAArB,KAAD,CAAH;AACjBP,IAAAA,GAAG,CAAC;AAAEQ,MAAAA,OAAO,EAAE;AAAX,KAAD,CAAH;AAEH,GAjCmE;AAkCpEgB,EAAAA,mBAAmB,EAAE,MAAOR,KAAP,IAAiB;AAClCA,IAAAA,KAAK,CAACC,cAAN;AACAjB,IAAAA,GAAG,CAAC;AAAEG,MAAAA,KAAK,EAAE;AAAT,KAAD,CAAH;AACAH,IAAAA,GAAG,CAAC;AAAEQ,MAAAA,OAAO,EAAE;AAAX,KAAD,CAAH;AACA,UAAMJ,KAAK,GAAGH,GAAG,GAAGG,KAApB;AACA,UAAM;AAAED,MAAAA;AAAF,QAAY,MAAMR,QAAQ,CAACwB,IAAT,CAAcM,GAAd,CAAkBC,qBAAlB,CAAwCtB,KAAxC,CAAxB;AACA,QAAID,KAAJ,EAAWH,GAAG,CAAC;AAAEG,MAAAA,KAAK,EAAEA,KAAK,CAACI;AAAf,KAAD,CAAH,CAAX,KACKP,GAAG,CAAC;AAAEO,MAAAA,OAAO,EAAE;AAAX,KAAD,CAAH;AACLP,IAAAA,GAAG,CAAC;AAACQ,MAAAA,OAAO,EAAG;AAAX,KAAD,CAAH;AACH;AA3CmE,CAAd,CAAnB,CAAhC","sourcesContent":["import { FormEvent } from 'react'\nimport create from 'zustand'\nimport { supabase } from './supabaseClient';\nimport createContext from 'zustand/context'\nimport { AuthSession } from '@supabase/supabase-js'\n\n\n\n\nexport const { Provider, useStore } = createContext<authContextState>();\n\n\nexport interface authContextState {\n    authView: string\n    setAuthView: (to: string) => void\n    email: string  \n    password: string\n    error: string\n    loading: boolean\n    message: string\n   \n    setEmail: (to: string) => void\n    setPassword: (to: string) => void\n   // setError: (to: string) => void\n    handleSignIn: (event: FormEvent) => void\n    handleSignUp: (event: FormEvent) => void\n    handlePasswordReset: (event:FormEvent) => void\n}\n\n\n\nexport const createStore = () => create<authContextState>((set,get) => ({\n    authView: 'sign_in',\n    error: '',\n    email: '',\n    password: '',\n    session: null,\n    message: '',\n    loading: false,\n    setAuthView: (to) => set(state => ({ authView: to })),\n   // setError: (to) => set(state => ({ error: to })),\n    setEmail: (to) => set(state => ({ email: to.trim() })),\n    setPassword: (to) => set(state => ({ password: to.trim() })),\n    handleSignIn: async (event) => {\n        event.preventDefault()\n        set({ error: '' })\n        set({ loading: true })\n        const email = get().email\n        const password = get().password\n        const {  error: signInError } = await supabase.auth.signIn({ email, password })\n        if (signInError) set({ error: signInError.message })\n        set({ loading: false })\n        \n    },\n    handleSignUp: async (event) => {\n        event.preventDefault()\n        set({ error: '' })\n        set({ loading: true })\n        const email = get().email\n        const password  = get().password\n        const { error: signUpError } = await supabase.auth.signUp({ email, password })\n        if (signUpError) set({ error: signUpError.message })\n        set({ loading: false })\n      \n    },\n    handlePasswordReset: async (event) => {\n        event.preventDefault()\n        set({ error: '' })\n        set({ loading: true })\n        const email = get().email\n        const { error } = await supabase.auth.api.resetPasswordForEmail(email)\n        if (error) set({ error: error.message })\n        else set({ message: 'Check your email for the password reset link' })\n        set({loading : false})\n    }\n}))"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from \"/home/lukatoni/Repositories/NextProjects/invoice-creator/node_modules/@babel/runtime/regenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _asyncToGenerator from \"/home/lukatoni/Repositories/NextProjects/invoice-creator/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/home/lukatoni/Repositories/NextProjects/invoice-creator/components/Avatar.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { supabase } from '../lib/supabaseClient';\nimport { DEFAULT_AVATARS_BUCKET } from '../lib/constants';\nexport default function Avatar(_ref) {\n  _s();\n\n  var url = _ref.url,\n      size = _ref.size;\n\n  var _useState = useState(null),\n      avatarUrl = _useState[0],\n      setAvatarUrl = _useState[1];\n\n  useEffect(function () {\n    if (url) downloadImage(url);\n  }, [url]);\n\n  function downloadImage(_x) {\n    return _downloadImage.apply(this, arguments);\n  }\n\n  function _downloadImage() {\n    _downloadImage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(path) {\n      var _yield$supabase$stora, data, error, _url;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return supabase.storage.from(DEFAULT_AVATARS_BUCKET).download(path);\n\n            case 3:\n              _yield$supabase$stora = _context.sent;\n              data = _yield$supabase$stora.data;\n              error = _yield$supabase$stora.error;\n\n              if (!error) {\n                _context.next = 8;\n                break;\n              }\n\n              throw error;\n\n            case 8:\n              _url = URL.createObjectURL(data);\n              setAvatarUrl(_url);\n              _context.next = 15;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](0);\n              console.log('Error downloading image: ', _context.t0.message);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 12]]);\n    }));\n    return _downloadImage.apply(this, arguments);\n  }\n\n  return avatarUrl ? /*#__PURE__*/_jsxDEV(\"img\", {\n    src: avatarUrl,\n    className: \"avatar image\",\n    style: {\n      height: size,\n      width: size\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"avatar no-image\",\n    style: {\n      height: size,\n      width: size\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Avatar, \"zAzasRWeRjR3RT9l/hnQIJByZTY=\");\n\n_c = Avatar;\n\nvar _c;\n\n$RefreshReg$(_c, \"Avatar\");","map":{"version":3,"sources":["/home/lukatoni/Repositories/NextProjects/invoice-creator/components/Avatar.tsx"],"names":["useEffect","useState","supabase","DEFAULT_AVATARS_BUCKET","Avatar","url","size","avatarUrl","setAvatarUrl","downloadImage","path","storage","from","download","data","error","URL","createObjectURL","console","log","message","height","width"],"mappings":";;;;;;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,QAAT,QAAyB,uBAAzB;AACA,SAASC,sBAAT,QAAuC,kBAAvC;AAEA,eAAe,SAASC,MAAT,OAAqE;AAAA;;AAAA,MAAnDC,GAAmD,QAAnDA,GAAmD;AAAA,MAA9CC,IAA8C,QAA9CA,IAA8C;;AAAA,kBAChDL,QAAQ,CAAgB,IAAhB,CADwC;AAAA,MAC3EM,SAD2E;AAAA,MAChEC,YADgE;;AAGlFR,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIK,GAAJ,EAASI,aAAa,CAACJ,GAAD,CAAb;AACV,GAFQ,EAEN,CAACA,GAAD,CAFM,CAAT;;AAHkF,WAOnEI,aAPmE;AAAA;AAAA;;AAAA;AAAA,8EAOlF,iBAA6BC,IAA7B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEkCR,QAAQ,CAACS,OAAT,CAAiBC,IAAjB,CAAsBT,sBAAtB,EAA8CU,QAA9C,CAAuDH,IAAvD,CAFlC;;AAAA;AAAA;AAEYI,cAAAA,IAFZ,yBAEYA,IAFZ;AAEkBC,cAAAA,KAFlB,yBAEkBA,KAFlB;;AAAA,mBAGQA,KAHR;AAAA;AAAA;AAAA;;AAAA,oBAIYA,KAJZ;;AAAA;AAMUV,cAAAA,IANV,GAMgBW,GAAG,CAACC,eAAJ,CAAoBH,IAApB,CANhB;AAOIN,cAAAA,YAAY,CAACH,IAAD,CAAZ;AAPJ;AAAA;;AAAA;AAAA;AAAA;AASIa,cAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyC,YAAMC,OAA/C;;AATJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAPkF;AAAA;AAAA;;AAoBlF,SAAOb,SAAS,gBACd;AAAK,IAAA,GAAG,EAAEA,SAAV;AAAqB,IAAA,SAAS,EAAC,cAA/B;AAA8C,IAAA,KAAK,EAAE;AAAEc,MAAAA,MAAM,EAAEf,IAAV;AAAgBgB,MAAAA,KAAK,EAAEhB;AAAvB;AAArD;AAAA;AAAA;AAAA;AAAA,UADc,gBAGd;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAiC,IAAA,KAAK,EAAE;AAAEe,MAAAA,MAAM,EAAEf,IAAV;AAAgBgB,MAAAA,KAAK,EAAEhB;AAAvB;AAAxC;AAAA;AAAA;AAAA;AAAA,UAHF;AAKD;;GAzBuBF,M;;KAAAA,M","sourcesContent":["import { useEffect, useState } from 'react'\nimport { supabase } from '../lib/supabaseClient'\nimport { DEFAULT_AVATARS_BUCKET } from '../lib/constants'\n\nexport default function Avatar({ url, size }: { url: string | null; size: number }) {\n  const [avatarUrl, setAvatarUrl] = useState<string | null>(null)\n\n  useEffect(() => {\n    if (url) downloadImage(url)\n  }, [url])\n\n  async function downloadImage(path: string) {\n    try {\n      const { data, error } = await supabase.storage.from(DEFAULT_AVATARS_BUCKET).download(path)\n      if (error) {\n        throw error\n      }\n      const url = URL.createObjectURL(data)\n      setAvatarUrl(url)\n    } catch (error) {\n      console.log('Error downloading image: ', error.message)\n    }\n  }\n\n  return avatarUrl ? (\n    <img src={avatarUrl} className=\"avatar image\" style={{ height: size, width: size }} />\n  ) : (\n    <div className=\"avatar no-image\" style={{ height: size, width: size }} />\n  )\n}\n"]},"metadata":{},"sourceType":"module"}